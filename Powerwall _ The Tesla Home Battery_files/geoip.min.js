var geoip2=function(){"use strict";function t(t,e,o,s,n,r,i){this.successCallback=t,this.errorCallback=e,this.geolocation=o&&o.hasOwnProperty("geolocation")?o.geolocation:navigator.geolocation,this.endpoint=n&&""!=n?n:"",this.context=!r||"production"!=r&&"staging"!=r?"production":r,this.version=i&&""!=i&&-1!=i.indexOf("v")?i:"v1.0.3",this.type=s}function e(t,e){var o=new XMLHttpRequest,s=Math.random();try{o.open(t,e+"?pc="+s,!0)}catch(n){o=null}return o}function o(t){for(var e=window.location.search.substring(1),o=e.split("&"),s=0;s<o.length;s++){var n=o[s].split("=");if(n[0]===t)return n[1]}return!1}var s={};return t.prototype.returnSuccess=function(t){this.successCallback&&"function"==typeof this.successCallback&&this.successCallback(t)},t.prototype.getGeoIPResult=function(){var t,s=this,n=s.context,r=s.endpoint;-1===window.location.hostname.indexOf("tesla.cn")?"production"==n?r="https://location.teslamotors.com/geoip/"+this.version+"/"+this.type+"/":""==r&&(r="http://sjc04s1gipap01.teslamotors.com:1112/geoip/"+this.version+"/"+this.type+"/"):r="production"==n?"https://location.tesla.cn/geoip/"+this.version+"/"+this.type+"/":"http://sjc04s1gipap01.teslamotors.com:1112/geoip/"+this.version+"/"+this.type+"/",o("ip")&&(r=r+"?ip="+o("ip"));var t=e("get",r);t?(-1==navigator.userAgent.indexOf("Trident")?t.onreadystatechange=function(){if(4===t.readyState)if(t.status<200||t.status>=400)s.errorCallback();else try{var e=JSON.parse(t.responseText);s.returnSuccess(e)}catch(o){s.errorCallback()}}:t.readyState&&(t.onload=function(){if(t.status<200||t.status>=400)s.errorCallback(t.status);else try{var e=JSON.parse(t.responseText);s.returnSuccess(e)}catch(o){s.errorCallback()}}),t.send(t.responseText)):s.errorCallback()},s.country=function(e,o,s,n,r,i){var a=new t(e,o,s,"country",n,r,i);a.getGeoIPResult()},s.city=function(e,o,s,n,r,i){var a=new t(e,o,s,"city",n,r,i);a.getGeoIPResult()},s.connection=function(e,o,s,n,r,i){var a=new t(e,o,s,"connection",n,r,i);a.getGeoIPResult()},s}();